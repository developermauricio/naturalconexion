!function(a,b){"function"==typeof define&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils"],b):"object"==typeof module&&module.exports?module.exports=b(require("flickity"),require("fizzy-ui-utils")):b(a.Flickity,a.fizzyUIUtils)}(this,function(a,b){var c=a.Slide,d=c.prototype.updateTarget;c.prototype.updateTarget=function(){if(d.apply(this,arguments),this.parent.options.fade){var a=this.target-this.x,b=this.cells[0].x;this.cells.forEach(function(c){var d=c.x-b-a;c.renderPosition(d)})}},c.prototype.setOpacity=function(a){this.cells.forEach(function(b){b.element.style.opacity=a})};var e=a.prototype;a.createMethods.push("_createFade"),e._createFade=function(){this.fadeIndex=this.selectedIndex,this.prevSelectedIndex=this.selectedIndex,this.on("select",this.onSelectFade),this.on("dragEnd",this.onDragEndFade),this.on("settle",this.onSettleFade),this.on("activate",this.onActivateFade),this.on("deactivate",this.onDeactivateFade)};var f=e.updateSlides;e.updateSlides=function(){f.apply(this,arguments),this.options.fade&&this.slides.forEach(function(a,b){var c=b==this.selectedIndex?1:0;a.setOpacity(c)},this)},e.onSelectFade=function(){this.fadeIndex=Math.min(this.prevSelectedIndex,this.slides.length-1),this.prevSelectedIndex=this.selectedIndex},e.onSettleFade=function(){if(delete this.didDragEnd,this.options.fade){this.selectedSlide.setOpacity(1);this.slides[this.fadeIndex]&&this.fadeIndex!=this.selectedIndex&&this.slides[this.fadeIndex].setOpacity(0)}},e.onDragEndFade=function(){this.didDragEnd=!0},e.onActivateFade=function(){this.options.fade&&this.element.classList.add("is-fade")},e.onDeactivateFade=function(){this.options.fade&&(this.element.classList.remove("is-fade"),this.slides.forEach(function(a){a.setOpacity("")}))};var g=e.positionSlider;e.positionSlider=function(){if(!this.options.fade)return void g.apply(this,arguments);this.fadeSlides(),this.dispatchScrollEvent()};var h=e.positionSliderAtSelected;e.positionSliderAtSelected=function(){this.options.fade&&this.setTranslateX(0),h.apply(this,arguments)},e.fadeSlides=function(){if(!(this.slides.length<2)){var a=this.getFadeIndexes(),b=this.slides[a.a],c=this.slides[a.b],d=this.wrapDifference(b.target,c.target),e=this.wrapDifference(b.target,-this.x);e/=d,b.setOpacity(1-e),c.setOpacity(e);var f=a.a;this.isDragging&&(f=e>.5?a.a:a.b);void 0!=this.fadeHideIndex&&this.fadeHideIndex!=f&&this.fadeHideIndex!=a.a&&this.fadeHideIndex!=a.b&&this.slides[this.fadeHideIndex].setOpacity(0),this.fadeHideIndex=f}},e.getFadeIndexes=function(){return this.isDragging||this.didDragEnd?this.options.wrapAround?this.getFadeDragWrapIndexes():this.getFadeDragLimitIndexes():{a:this.fadeIndex,b:this.selectedIndex}},e.getFadeDragWrapIndexes=function(){var a=this.slides.map(function(a,b){return this.getSlideDistance(-this.x,b)},this),c=a.map(function(a){return Math.abs(a)}),d=Math.min.apply(Math,c),e=c.indexOf(d),f=a[e],g=this.slides.length,h=f>=0?1:-1;return{a:e,b:b.modulo(e+h,g)}},e.getFadeDragLimitIndexes=function(){for(var a=0,b=0;b<this.slides.length-1;b++){var c=this.slides[b];if(-this.x<c.target)break;a=b}return{a:a,b:a+1}},e.wrapDifference=function(a,b){var c=b-a;if(!this.options.wrapAround)return c;var d=c+this.slideableWidth,e=c-this.slideableWidth;return Math.abs(d)<Math.abs(c)&&(c=d),Math.abs(e)<Math.abs(c)&&(c=e),c};var i=e._getWrapShiftCells;e._getWrapShiftCells=function(){this.options.fade||i.apply(this,arguments)};var j=e.shiftWrapCells;return e.shiftWrapCells=function(){this.options.fade||j.apply(this,arguments)},a});