jQuery(function(e){"use strict";function t(){this.init=function(){e(document).on("change","#iconic-wsb-fbt-discount-type",this.selectChangeHandler),e(document).on("change","#iconic-wsb-fbt-discount-value",this.valueChangeHandler),this.selectChangeHandler()},this.selectChangeHandler=function(){var t=e("#iconic-wsb-fbt-discount-type").val(),i=e("#iconic-wsb-fbt-discount-value").val();"percentage"===t?(e("#iconic-wsb-fbt-discount-value").prop("min",0),e("#iconic-wsb-fbt-discount-value").prop("max",100),100<i&&e("#iconic-wsb-fbt-discount-value").val(100)):(e("#iconic-wsb-fbt-discount-value").prop("min",""),e("#iconic-wsb-fbt-discount-value").prop("max",""))},this.valueChangeHandler=function(){"percentage"===e("#iconic-wsb-fbt-discount-type").val()&&100<e(this).val()&&(e(this).val(100),alert("Percentage discount cannot be more than 100")),e(this).val()<0&&(e(this).val(0),alert("Discount cannot be negetive"))}}e(document).ready(function(){(new t).init()})}),jQuery(function(t){"use strict";if("undefined"!=typeof iconic_wsb_admin_vars&&void 0!==iconic_wsb_admin_vars.postId){var i,e=wp.media.model.settings.post.id,a=iconic_wsb_admin_vars.postId,n=t("[data-iconic-wsb-image-preview]"),s=t("[data-iconic-wsb-image-attachment-id]");t(document).on("click","[data-iconic-wsb-upload-image]",function(t){if(t.preventDefault(),i)return i.uploader.uploader.param("post_id",a),void i.open();wp.media.model.settings.post.id=a,(i=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1})).on("select",function(){var t=i.state().get("selection").first().toJSON();n.attr("src",t.url),s.val(t.id),wp.media.model.settings.post.id=e}),i.open()}),t("a.add_media").on("click",function(){wp.media.model.settings.post.id=e})}}),jQuery(function(r){"use strict";"undefined"!=typeof iconic_wsb_admin_vars&&void 0!==iconic_wsb_admin_vars.postId&&(r("[data-iconic-wsb-color-picker]").wpColorPicker({change:function(t,i){var e=i.color.toString();r(this).val(e).trigger("change")}}),r(document).on("change","[data-iconic-wsb-display-for--select]",function(){var t=r(this),i=t.closest("[data-iconic-wsb-display-for--scope]"),e=i.find("[data-iconic-wsb-display-for--spoiler]"),a=i.find("[data-iconic-wsb-display-for--control]");"all"===t.val()?(e.addClass("iconic-wsb-hidden"),a.removeAttr("required")):(e.removeClass("iconic-wsb-hidden"),a.attr("required","required"))}),r(document).on("change","[data-iconic-wsb-specific-products]",function(){var t=r(this).val(),i=r("[data-iconic-wsb-offer-product]");t&&t.length&&i.data("exclude",t.join(","))}),r(document).on("change","[data-iconic-wsb-offer-product]",function(){var t=r(this).val(),n=r("[data-iconic-wsb-discount-value]"),s=r("[data-iconic-wsb-discount-type]").val(),o=r("[data-iconic-wsb-image-preview]"),c=r("[data-iconic-wsb-image-attachment-id]"),d=r(this);r.get(ajaxurl,{action:"iconic_wsb_checkout_order_bump_calculate_price",product_id:t},function(t){var i=d.closest("[data-iconic-wsb-offer-scope]"),e=i.find("[data-iconic-wsb-discount-type]"),a=i.find("[data-iconic-wsb-discount-value]");e.attr("data-simple-max",t.sale_price),"simple"===s&&a.attr("max",t.sale_price),"percentage"===s&&a.attr("max",e.attr("data-percentage-max")),t.image_id&&(o.attr("src",t.image_url),c.val(t.image_id)),n.trigger("input")})}),r(document).on("change","[data-iconic-wsb-discount-type]",function(){var t=r(this),i=t.closest("[data-iconic-wsb-offer-scope]").find("[data-iconic-wsb-discount-value]");"percentage"===t.val()?(i.attr("max",t.attr("data-percentage-max")),99<i.val()&&i.val(1)):"simple"===t.val()&&i.attr("max",t.attr("data-simple-max")),i.trigger("input")}),r(document).on("change","[data-iconic-wsb-discount-value],[data-iconic-wsb-discount-type],[data-iconic-wsb-offer-product]",function(){var t=r("[data-iconic-wsb-discount-value]").val(),i=r("[data-iconic-wsb-discount-type]").val(),e=r("[data-iconic-wsb-offer-product]").val(),a=r("[data-iconic-wsb-setting-show-price--element]"),n=r("[data-iconic-wsb-product-customize-price--regular]");a.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),r.get(ajaxurl,{action:"iconic_wsb_checkout_order_bump_calculate_price",product_id:e,discount_type:i,discount:t},function(t){n.html(t.regular_price_html),r("[data-iconic-wsb-product-customize-price--discount]").html(t.sale_price_html),parseFloat(t.regular_price)===parseFloat(t.sale_price)?n.addClass("hidden"):n.removeClass("hidden"),a.unblock()})}),r(document).on("change","[data-iconic-wsb-setting-show-image]",function(){var t=r("[data-iconic-wsb-setting-show-image--element]");"yes"===r(this).val()?t.removeClass("iconic-wsb-hidden"):t.addClass("iconic-wsb-hidden")}),r(document).on("change","[data-iconic-wsb-setting-show-price]",function(){var t=r("[data-iconic-wsb-setting-show-price--element]");"yes"===r(this).val()?t.removeClass("iconic-wsb-hidden"):t.addClass("iconic-wsb-hidden")}),r(document).on("change","[data-iconic-wsb-setting-border-style]",function(){var t=r(this).val();r("[data-iconic-wsb-setting-border-style--element]").css({"border-style":t})}),r(document).on("change","[data-iconic-wsb-setting-border-color]",function(){var t=r(this).val();r("[data-iconic-wsb-setting-border-style--element]").css({"border-color":t})}),r(document).on("change","[data-iconic-wsb-setting-highlight-color]",function(){var t=r(this).val();r("[data-iconic-wsb-setting-highlight-color--element]").css({color:t})}),r(document).on("click","[data-add-benefit-button]",function(t){t.preventDefault();var i=r("[data-benefit-template]").clone();i.removeAttr("data-benefit-template"),i.removeClass("iconic-wsb-hidden"),r("[data-benefits-container]").append(i)}),r(document).on("click","[data-remove-benefit]",function(){r(this).closest("[data-benefit]").remove()}),r(document).on("click",".iconic-wsb-edit-page-nav__item-link",function(t){t.preventDefault();var i=r(this),e=r(".iconic-wsb-edit-page-nav__item-link"),a=i.attr("href"),n=r(".iconic-wsb-edit-page__step"),s=r(a);e.removeClass("iconic-wsb-edit-page-nav__item-link--active"),i.addClass("iconic-wsb-edit-page-nav__item-link--active"),n.removeClass("iconic-wsb-edit-page__step--active"),s.addClass("iconic-wsb-edit-page__step--active")}))}),jQuery(function(a){"use strict";"undefined"!=typeof iconic_wsb_admin_vars&&void 0!==iconic_wsb_admin_vars.posts&&(0===a(".post_type_page").length||"at_checkout_ob"!==a(".post_type_page").val()&&"after_checkout_ob"!==a(".post_type_page").val()||a("#the-list").sortable({handle:".iconic-wsb-sortable",axis:"y",update:function(t,i){var e=a(".wp-list-table");a.ajax({type:"POST",url:ajaxurl,data:{data:a(this).sortable("serialize"),posts:iconic_wsb_admin_vars.posts,action:"iconic_wsb_handle_sorting_bump_checkout_product",post_type:iconic_wsb_admin_vars.post_type},success:function(t){iconic_wsb_admin_vars.posts=t.posts},beforeSend:function(){e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){e.unblock()},dataType:"json"})}}))}),function(d,t,i){"use strict";var e="inputQuantity",a={input:"[data-quantity-field]",checkNotNumberReg:/[\D]/g,checkNotNumberFloatReg:/[^\d\.]/g,decimalSeparatorReg:/[.]/g,tooltipTimeout:3e3};function n(t,i){this.element=t,this.settings=d.extend({},a,i),this.settings.validationMessage=d(this.element).data("quantity-validation"),this._defaults=a,this._name=e,this.init()}d.extend(n.prototype,{init:function(){this.input=d(this.element).find(this.settings.input),d(this.input).on("input",d.proxy(this.inputHandler,this)),d(this.input).on("keypress",d.proxy(this.keypressHandler,this)),this.tooltip=d("<div/>",{class:"iconic-wsb-quantity__tooltip",text:""}).appendTo(d(this.element));var t=d(this.input).attr("step"),i=String(t).substring(String(t).indexOf(".")).length-1;this.settings.float=0!=i},keypressHandler:function(t){t=t||event;var i,e=this.getChar(t),a=this.settings.validationMessage.onlyNumber,n=this.settings.decimalSeparatorReg,s=d(this.input).val();return i=this.settings.float?this.settings.checkNotNumberFloatReg:this.settings.checkNotNumberReg,t.ctrlKey||t.altKey||null==e?(this.showMessage(a),!1):i.test(e)?(this.showMessage(a),!1):s.match(n)&&!/[\d]/.test(e)?(this.showMessage(a),!1):void 0},inputHandler:function(t){var i=d(this.input).val();return this.validateInput(i)},validateInput:function(t){var i,e=d(this.input),a=Number(e.attr("max"))||1/0,n=Number(e.attr("min"))||-1/0,s=this.settings.validationMessage.max,o=this.settings.validationMessage.min,c=this.settings.validationMessage.onlyNumber;return i=this.settings.float?this.settings.checkNotNumberFloatReg:this.settings.checkNotNumberReg,a<t?(this.showMessage(s+a),this.setInputValue(a)):t<n?(this.showMessage(o+n),this.setInputValue(n)):isNaN(t)||i.test(t)?(this.showMessage(c),this.setInputValue(n)):this.setInputValue(t)},setInputValue:function(t){var i=d(this.input),e=i.attr("step"),a=String(e).substring(String(e).indexOf(".")).length-1;return Number(t)!==+Number(t).toFixed(0)&&(t=Number(t).toFixed(a)),i.val(t),t},showMessage:function(t){var i=this,e=this.settings.tooltipTimeout;d(this.tooltip).html(t).addClass("is-active"),clearTimeout(this.timerId),this.timerId=setTimeout(function(){i.removeMessage()},e)},removeMessage:function(){d(this.tooltip).removeClass("is-active")},getChar:function(t){return null===t.which?t.keyCode<32?null:String.fromCharCode(t.keyCode):0!==t.which&&0!==t.charCode?t.which<32?null:String.fromCharCode(t.which):null}}),d.fn[e]=function(t){return this.each(function(){d.data(this,"plugin_"+e)||d.data(this,"plugin_"+e,new n(this,t))})},d(i).ready(function(){d("[data-quantity-validation]").inputQuantity()})}(jQuery,window,document);