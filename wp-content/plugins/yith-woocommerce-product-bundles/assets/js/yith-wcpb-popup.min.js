!function(e,i){e.fn.yith_wcpb_popup=function(o){var p={overlay:null};p.popup=e(this),p.opts={};var a={popup_class:"yith-wcpb-popup",overlay_class:"yith-wcpb-overlay",close_btn_class:"yith-wcpb-popup-close",ajax_container:"yith-wcpb-popup-ajax-container",url:"",ajax_data:{},ajax_complete:function(){},ajax_success:function(){},block_params:{message:"",blockMsgClass:"yith-wcpb-popup-loader",css:{border:"none",background:"transparent"},overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0},loader:'<span class="yith-wcpb-popup-loader"></span>'};p.init=function(){p.opts=e.extend({},a,o),"close"!==o?(s(),n(),c()):l()};var s=function(){0<e(i).find("."+p.opts.overlay_class).length?p.overlay=e(i).find("."+p.opts.overlay_class).first():(p.overlay=e("<div />").addClass(p.opts.overlay_class),e(i.body).append(p.overlay))},n=function(){p.popup=e("<div />").addClass(p.opts.popup_class);var o=e("<span />").addClass(p.opts.close_btn_class+" dashicons dashicons-no-alt"),a=e("<div />").addClass(p.opts.ajax_container);p.popup.append(a),p.overlay.html(p.opts.loader),e.ajax({data:p.opts.ajax_data,url:p.opts.url,success:function(o){e(p.overlay).append(p.popup),a.html(o),p.opts.ajax_success()},complete:function(){p.popup.append(o),p.opts.ajax_complete()}})},c=function(){e(i).on("click","."+p.opts.overlay_class,l),e(i).on("click","."+p.opts.close_btn_class,l),e(i).on("click","."+p.opts.popup_class,t),e(i).on("keydown",function(o){27===o.keyCode&&l()})},t=function(o){o.stopPropagation()},l=function(){p.overlay.remove()};return p.init(),p.popup}}(jQuery,(window,document));